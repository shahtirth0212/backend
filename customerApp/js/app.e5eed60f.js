(function(){"use strict";var e={7809:function(e,t,i){var n=i(9242),s=i(3396);function o(e,t,i,n,o,r){const l=(0,s.up)("leftSideBar"),a=(0,s.up)("mainMenuComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(l,{order:this.order,total:this.total,onMobileChange:r.mobileEmmited},null,8,["order","total","onMobileChange"]),(0,s.Wm)(a,{onOnOrder:r.emitted,mobile:this.mobile},null,8,["onOnOrder","mobile"])],64)}var r=i(7139),l=i.p+"img/qr.38dc2c83.png";const a=e=>((0,s.dD)("data-v-6aab5839"),e=e(),(0,s.Cn)(),e),c={id:"container"},h={id:"msgs"},d=a((()=>(0,s._)("hr",null,null,-1))),u={id:"today"},m={style:{"font-weight":"bolder",color:"white"}},p={key:0},g=a((()=>(0,s._)("h4",null,"No selections made yet ",-1))),f=[g],b={key:1,style:{"border-bottom":"1px solid #999999"}},_=a((()=>(0,s._)("th",null,"Name",-1))),y=a((()=>(0,s._)("th",null,"Price",-1))),v=a((()=>(0,s._)("th",null,"Quantity",-1))),w=a((()=>(0,s._)("th",null,"Effective price",-1))),C={style:{background:"rgba(255, 255, 255, 0.055)"}},k={style:{border:"none","font-weight":"700"}},O={key:2,style:{"border-bottom":"1px solid #999999","padding-bottom":"1.6rem"}},D=a((()=>(0,s._)("label",{for:"mobile"},"Enter mobile number for better suggestions and user experience",-1))),I={key:3},S=a((()=>(0,s._)("hr",null,null,-1))),T={key:4},P={key:5},N={key:6},q=a((()=>(0,s._)("label",null,"Confirm ?",-1))),M={key:7,id:"qr"},z=a((()=>(0,s._)("img",{src:l,alt:"Failed to load QR please reach out to admin counter"},null,-1))),x=[z],j={key:8},E=a((()=>(0,s._)("label",null,"Reach out to admin counter for cash payment",-1))),Q=[E],H={key:9},A={key:0},B=a((()=>(0,s._)("label",null,"Waiting for payment confirmation...",-1))),U={key:10},Y=a((()=>(0,s._)("label",null,"Payment confirmed, Your order will be there soon",-1))),F=a((()=>(0,s._)("label",null,"Page will be reload after 20 seconds..",-1))),V={key:11},J=a((()=>(0,s._)("label",null,"Order canceled",-1))),K=a((()=>(0,s._)("label",null,"Page will be reload after 20 seconds..",-1)));function R(e,t,i,o,l,a){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",h,[(0,s._)("h3",null,(0,r.zw)(l.greeting),1),d,(0,s._)("div",u,[(0,s._)("h5",m," Table:"+(0,r.zw)(this.myTableNumber),1),(0,s._)("h5",null,(0,r.zw)(l.todayDate),1),(0,s._)("h5",null,(0,r.zw)(l.timeNow),1)])]),0!=i.order.length||this.orderPlaced||this.orderCancled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,f)),i.order.length>0&&!this.orderCancled?((0,s.wg)(),(0,s.iD)("table",b,[_,y,v,w,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.order,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.quan},[(0,s._)("td",null,(0,r.zw)(e.name),1),(0,s._)("td",null,(0,r.zw)(e.price)+" ₹",1),(0,s._)("td",null,"X "+(0,r.zw)(e.quan),1),(0,s._)("td",null,(0,r.zw)(e.ePrice)+" ₹",1)])))),128)),(0,s._)("tr",C,[(0,s._)("td",k,"Total: "+(0,r.zw)(i.total)+"₹",1)])])])):(0,s.kq)("",!0),this.placeOrder&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",O,[D,(0,s.wy)((0,s._)("input",{class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>l.mobile=e),onKeypress:t[1]||(t[1]=(...e)=>a.send_to_app&&a.send_to_app(...e)),type:"text",id:"mobile",maxlength:"10",placeholder:"Mobile number"},null,544),[[n.nr,l.mobile]])])):(0,s.kq)("",!0),this.total>0&&this.placeOrder&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",I,[(0,s.wy)((0,s._)("textarea",{cols:"40",rows:"4",class:"input",style:{resize:"none"},placeholder:"Any special instructions?","onUpdate:modelValue":t[2]||(t[2]=e=>l.note=e)},null,512),[[n.nr,l.note]])])):(0,s.kq)("",!0),S,this.total>0&&this.placeOrder&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("button",{class:"btn-green",onClick:t[3]||(t[3]=e=>(this.placeOrder=!1,this.showOptions=!0))},"Place Order")])):(0,s.kq)("",!0),this.showOptions&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",P,[(0,s._)("button",{class:"btn",onClick:t[4]||(t[4]=e=>(this.showOptions=!1,this.paymentConfirm=!0,this.type="online"))},"Online"),(0,s._)("button",{class:"btn",onClick:t[5]||(t[5]=e=>(this.showOptions=!1,this.paymentConfirm=!0,this.type="cash"))},"Cash"),(0,s._)("button",{class:"btn-red",onClick:t[6]||(t[6]=e=>(this.showOptions=!1,this.placeOrder=!0))},"Cancel")])):(0,s.kq)("",!0),l.paymentConfirm&&0==this.orderCancled&&i.order.length>0?((0,s.wg)(),(0,s.iD)("div",N,[q,(0,s._)("button",{class:"btn-green",onClick:t[7]||(t[7]=e=>(this.final=!0,this.paymentConfirm=!1,this.showOptions=!1,this.placeOrder=!1,a.send_order_to_DB()))},"Yes"),(0,s._)("button",{class:"btn-red",onClick:t[8]||(t[8]=e=>(this.paymentConfirm=!1,this.showOptions=!0))},"No")])):(0,s.kq)("",!0),this.final&&"online"==this.type&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",M,x)):(0,s.kq)("",!0),this.final&&"cash"==this.type&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",j,Q)):(0,s.kq)("",!0),0==this.orderPlaced&&this.final&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",H,[this.cancelVisible?((0,s.wg)(),(0,s.iD)("label",A,"You can only cancel your order in 1 minute after placing order")):(0,s.kq)("",!0),this.cancelVisible?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn-red",onClick:t[9]||(t[9]=e=>(this.orderPlaced=!1,this.orderCancled=!0,a.cancelOrder()))},"Cancel Order")):(0,s.kq)("",!0),B])):(0,s.kq)("",!0),this.orderPlaced&&0==this.orderCancled?((0,s.wg)(),(0,s.iD)("div",U,[Y,(0,s._)("button",{class:"btn",onClick:t[10]||(t[10]=(...e)=>a.reload&&a.reload(...e))},"Click to keep browsing"),F])):(0,s.kq)("",!0),this.orderCancled?((0,s.wg)(),(0,s.iD)("div",V,[J,(0,s._)("button",{class:"btn",onClick:t[11]||(t[11]=(...e)=>a.reload&&a.reload(...e))},"Click to keep browsing"),K])):(0,s.kq)("",!0)])}i(7658);var G={name:"leftSideBar",props:["order","total"],data(){return{greeting:"",todayDate:"",timeNow:"",placeOrder:!0,showOptions:!1,paymentConfirm:!1,type:"",final:!1,orderPlaced:!1,myTableNumber:Number,orderCancled:!1,note:"",mobile:"",items:[],user:Object,cancelVisible:!0}},watch:{total(){this.total<=0&&(this.placeOrder=!0,this.showOptions=!1,this.paymentConfirm=!1,this.final=!1,this.orderPlaced=!1)}},emits:["mobileChange"],created(){let e=new Date;this.todayDate=e.getDate()+"/"+e.getMonth()+"1/"+e.getFullYear();let t=window.location.href.split("!");this.myTableNumber=t[1],this.createClock()},methods:{cancelOrder(){fetch("http://localhost/orders/cancleMyOrder"+this.myTableNumber,{method:"DELETE"})},reload(){location.reload()},createClock(){setInterval((()=>{let e=new Date;this.timeNow=e.toTimeString(),this.timeNow=this.timeNow.slice(0,9),e.getHours()>=12&&e.getHours()<15?this.greeting="Good Afternoon !":e.getHours()<12?this.greeting="Good Morning ! ":e.getHours()>=15&&(this.greeting="Good Evening !")}),1e3)},send_order_to_DB(){""==this.note.trim()&&(this.note="Regular"),fetch("http://localhost/orders/placeOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:this.order,total:this.total,tableNumber:this.myTableNumber,isServed:!1,isPaymentDone:!1,paymentType:this.type,disableButtons:!1,note:this.note})}),setTimeout((()=>{this.cancelVisible=!1}),6e4),this.checkForConfirmation()},checkForConfirmation(){let e=setInterval((()=>{console.log("checking"),fetch("http://localhost/orders/fetchMyTableOrder"+this.myTableNumber).then((e=>{if(e.ok)return e.json();console.log("error")})).then((t=>{0==t.length?(this.orderCancled=!0,clearInterval(e),setTimeout((()=>{location.reload()}),2e4)):1==t[0].isPaymentDone&&(this.orderPlaced=!0,10==this.mobile.length&&(this.store_user_data(),clearInterval(e)),clearInterval(e),setTimeout((()=>{location.reload()}),2e4))}))}),2e3)},store_user_data(){fetch("http://localhost/getFoodItems").then((e=>{if(e.ok)return e.json();console.log("error")})).then((e=>{const t=[];for(const i in e)t.push({itemName:e[i].itemName,ingredients:e[i].ingredients});this.items=t})),setTimeout((()=>{let e=[];this.order.forEach((t=>{this.items.forEach((i=>{i.itemName==t.name&&i.ingredients.forEach((t=>{e.push(t)}))}))})),fetch("http://localhost/orders/findUser"+this.mobile).then((e=>{if(e.ok)return e.json();console.log("error")})).then((t=>{0==t.length?fetch("http://localhost/orders/postUserData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobile:this.mobile,ingredients:e})}):fetch("http://loclocalhostalhost/orders/updateSuggestion"+this.mobile,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:e})})}))}),2e3)},send_to_app(){this.$emit("mobileChange",this.mobile)}}},L=i(89);const W=(0,L.Z)(G,[["render",R],["__scopeId","data-v-6aab5839"]]);var Z=W,$=i.p+"img/premium-quality.e4f8f69c.png",X=i.p+"img/spicy.cd662e1c.png";const ee=e=>((0,s.dD)("data-v-6aa1e0ea"),e=e(),(0,s.Cn)(),e),te={id:"btnContainer"},ie=ee((()=>(0,s._)("span",{class:"special",style:{margin:"0vw 0vw 0vw 0.6vw"}},[(0,s._)("img",{src:$,alt:""})],-1))),ne=ee((()=>(0,s._)("img",{class:"chilly",src:X,alt:"",style:{width:"2.2vw",margin:"0vw 0vw 0vw 0.6vw"}},null,-1))),se={key:0},oe=ee((()=>(0,s._)("label",{class:"warning"},"No previous orders found",-1))),re=[oe],le={key:1},ae=ee((()=>(0,s._)("label",{class:"warning"},"No mobile number entered",-1))),ce=[ae],he={id:"menuContainer"},de={class:"card-body"},ue={class:"card-title"},me={key:0,class:"chilly",src:X,alt:"(spicy)"},pe={key:1,class:"special"},ge=ee((()=>(0,s._)("img",{src:$,alt:""},null,-1))),fe=[ge],be={class:"itemprice"},_e={class:"itemtype"},ye=["onClick"],ve={key:1},we=["onClick"],Ce=ee((()=>(0,s._)("span",null,"-",-1))),ke=[Ce],Oe=["onClick"],De=ee((()=>(0,s._)("span",null,"+",-1))),Ie=[De],Se={key:2},Te=["onClick"];function Pe(e,t,i,o,l,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",te,[(0,s._)("button",{class:(0,r.C_)(["btn",l.active[0]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[0]||(t[0]=e=>(a.filterAll(),this.active[0]=1,a.changeState(0)))},"All",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[1]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[1]||(t[1]=e=>(a.filterSuggestions(),this.active[1]=1,a.changeState(1)))},"Recommended",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[2]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[2]||(t[2]=e=>(a.filterInCart(),this.active[2]=1,a.changeState(2)))},"Already in Cart",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[3]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[3]||(t[3]=e=>(a.filterStarters(),this.active[3]=1,a.changeState(3)))},"Starters",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[4]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[4]||(t[4]=e=>(a.filterMain(),this.active[4]=1,a.changeState(4)))},"Main Course",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[5]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[5]||(t[5]=e=>(a.filterBeve(),this.active[5]=1,a.changeState(5)))},"Beverages",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[6]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[6]||(t[6]=e=>(a.filterDesert(),this.active[6]=1,a.changeState(6)))},"Deserts",2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[7]?"active":e.pass]),style:{"font-size":"1.25vw"},onClick:t[7]||(t[7]=e=>(a.filterSpecail(),this.active[7]=1,a.changeState(7)))},[(0,s.Uk)("Specials"),ie],2),(0,s._)("button",{class:(0,r.C_)(["btn",l.active[8]?"active":e.pass]),onClick:t[8]||(t[8]=e=>(a.filterSpicy(),this.active[8]=1,a.changeState(8)))},[(0,s.Uk)("Spicy "),ne],2)]),1==l.show_not_found_msg?((0,s.wg)(),(0,s.iD)("div",se,re)):(0,s.kq)("",!0),1==l.show_no_mob_num?((0,s.wg)(),(0,s.iD)("div",le,ce)):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{class:"input",type:"text",placeholder:"Search your food here","onUpdate:modelValue":t[9]||(t[9]=e=>l.search=e)},null,512),[[n.nr,l.search]])]),(0,s._)("div",he,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.menuItems,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"card",key:e.type},[(0,s._)("div",de,[(0,s._)("span",null,[(0,s._)("h4",ue,[(0,s.Uk)((0,r.zw)(e.itemName)+" ",1),e.isSpicy?((0,s.wg)(),(0,s.iD)("img",me)):(0,s.kq)("",!0),e.isSpecial?((0,s.wg)(),(0,s.iD)("span",pe,fe)):(0,s.kq)("",!0)])]),(0,s._)("h5",be,(0,r.zw)(e.itemPrice)+"₹",1),(0,s._)("h6",_e,(0,r.zw)(e.itemType),1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.ingredients,(e=>((0,s.wg)(),(0,s.iD)("label",{class:"ingredients",key:e},(0,r.zw)(e)+",",1)))),128))]),0==e.itemQuan?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn",onClick:t=>(e.itemQuan+=1,a.addToOrder(e.itemName,e.itemPrice,e.itemQuan),this.total+=e.itemPrice,a.sendToParent(),e.isInCart=!e.isInCart)}," ADD",8,ye)):(0,s.kq)("",!0),e.itemQuan>0?((0,s.wg)(),(0,s.iD)("div",ve,[(0,s._)("button",{class:"btn-red",onClick:i=>(e.itemQuan-=1,a.addToOrder(e.itemName,e.itemPrice,e.itemQuan,t),this.total-=e.itemPrice,a.sendToParent())},ke,8,we),(0,s._)("span",null,(0,r.zw)(e.itemQuan),1),(0,s._)("button",{class:"btn-green",onClick:i=>(e.itemQuan+=1,a.addToOrder(e.itemName,e.itemPrice,e.itemQuan,t),this.total+=e.itemPrice,a.sendToParent())},Ie,8,Oe)])):(0,s.kq)("",!0),1==e.isSuggested?((0,s.wg)(),(0,s.iD)("div",Se,[(0,s._)("button",{class:"btn-red",onClick:e=>a.not_interested(t)},"Not interested",8,Te)])):(0,s.kq)("",!0)])])))),128))])],64)}var Ne={name:"mainMenuComponent",emits:["onOrder"],props:["mobile"],data(){return{menuItems:[],allMenuItems:[],order:[],total:0,search:"",sugg:[],show_no_mob_num:!1,show_not_found_msg:!1,active:[1,0,0,0,0,0,0,0,0]}},watch:{search(){this.search_item()}},methods:{addToOrder(e,t,i,n){var s=this.order.map((e=>e.name)).indexOf(e);-1!=s?(this.order[s].quan=i,this.order[s].ePrice=t*i,0==this.order[s].quan&&(this.menuItems[n].isInCart=!1,this.order.splice(s,1))):this.order.push({name:e,price:t,quan:i,ePrice:t*i})},sendToParent(){this.$emit("onOrder",this.order,this.total)},filterStarters(){this.menuItems=this.allMenuItems.filter((function(e){return"Starter"===e.itemType}))},filterAll(){this.menuItems=this.allMenuItems},filterMain(){this.menuItems=this.allMenuItems.filter((function(e){return"Main course"===e.itemType}))},filterBeve(){this.menuItems=this.allMenuItems.filter((function(e){return"Beverage"===e.itemType}))},filterDesert(){this.menuItems=this.allMenuItems.filter((function(e){return"Desert"===e.itemType}))},filterSpecail(){this.menuItems=this.allMenuItems.filter((function(e){return!0===e.isSpecial}))},filterSpicy(){this.menuItems=this.allMenuItems.filter((function(e){return!0===e.isSpicy}))},filterInCart(){this.menuItems=this.allMenuItems.filter((function(e){return!0===e.isInCart}))},search_item(){""==this.search.trim()&&(this.menuItems=this.allMenuItems),this.menuItems=this.allMenuItems.filter((e=>{if(-1!=e.itemName.toLowerCase().indexOf(this.search.toLowerCase()))return!0}))},filterSuggestions(){this.mobile.length<10&&(this.show_no_mob_num=!0),10==this.mobile.length&&(this.show_no_mob_num=!1,fetch("http://localhost/orders/findUser"+this.mobile).then((e=>{if(e.ok)return e.json();console.log("error")})).then((e=>{0==e.length?this.show_not_found_msg=!0:(this.sugg=e[0].ingredients,this.show_not_found_msg=!1)})),setTimeout((()=>{this.menuItems=[],this.sugg.forEach((e=>{this.allMenuItems.forEach((t=>{t.ingredients.indexOf(e)>-1&&(this.menuItems.indexOf(t)>-1||(t.isSuggested=!0,this.menuItems.push(t)))}))}))}),1e3))},not_interested(e){console.log(this.sugg),this.sugg.forEach((t=>{this.menuItems[e].ingredients.indexOf(t)>-1&&this.sugg.splice(this.sugg.indexOf(t),1)})),this.menuItems.splice(e,1),fetch("http://localhost/orders/updateSuggestion"+this.mobile,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:this.sugg})})},changeState(e){for(let t=0;t<this.active.length;t++)t==e||(this.active[t]=0)}},created(){fetch("http://localhost/getFoodItems").then((e=>{if(e.ok)return e.json();console.log("error")})).then((e=>{const t=[];for(const i in e)t.push({id:e[i]._id,isSpecial:e[i].isSpecial,isSpicy:e[i].isSpicy,itemName:e[i].itemName,itemPrice:e[i].itemPrice,itemType:e[i].itemType,ingredients:e[i].ingredients,itemQuan:0,isInCart:!1,isSuggested:!1});this.menuItems=t,this.allMenuItems=this.menuItems}))}};const qe=(0,L.Z)(Ne,[["render",Pe],["__scopeId","data-v-6aa1e0ea"]]);var Me=qe,ze={name:"App",data(){return{order:[],total:0,mobile:""}},components:{leftSideBar:Z,mainMenuComponent:Me},methods:{emitted(e,t){this.order=e,this.total=t},mobileEmmited(e){this.mobile=e}}};const xe=(0,L.Z)(ze,[["render",o]]);var je=xe;(0,n.ri)(je).mount("#app")}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,o){if(!n){var r=1/0;for(h=0;h<e.length;h++){n=e[h][0],s=e[h][1],o=e[h][2];for(var l=!0,a=0;a<n.length;a++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[a])}))?n.splice(a--,1):(l=!1,o<r&&(r=o));if(l){e.splice(h--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[n,s,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,r=n[0],l=n[1],a=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(a)var h=a(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(h)},n=self["webpackChunkuserapp"]=self["webpackChunkuserapp"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(7809)}));n=i.O(n)})();
//# sourceMappingURL=app.e5eed60f.js.map